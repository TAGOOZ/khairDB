# قاعدة بيانات الخير - نظام إدارة شامل للأعمال الخيرية

نظام إدارة حديث ومتكامل مصمم لتحسين العمليات الخيرية وتتبع المستفيدين وإدارة التوزيعات وتنسيق برامج مساعدة الأسر مع دعم متعدد اللغات والتحكم في الوصول القائم على الأدوار.

## 🌟 نظرة عامة

قاعدة بيانات الخير هي حل رقمي شامل للمؤسسات الخيرية لإدارة عملياتها بكفاءة. يوفر النظام أدوات لإدارة المستفيدين وتنسيق الأسر وتتبع التوزيعات والإشراف الإداري مع دعم كامل للغتين العربية والإنجليزية.

## 🎯 الميزات الأساسية

### 👥 نظام إدارة الأفراد
- **ملفات شاملة للمستفيدين**: سجلات مفصلة تشمل المعلومات الشخصية وتفاصيل الاتصال وحالة العمل والعلاقات الأسرية
- **تتبع المساعدات**: تتبع شامل لأنواع المساعدة المختلفة:
  - **المساعدة الطبية**: تتبع الاحتياجات الطبية والتأمين الصحي وتكاليف العلاج ومتطلبات الأدوية
  - **المساعدة الغذائية**: مراقبة بطاقات التموين وبرامج الوجبات والدعم الغذائي
  - **مساعدة الزواج**: دعم مصاريف الزفاف وتوقيع العقود والاحتياجات ذات الصلة
  - **مساعدة الديون**: تتبع مبالغ الديون وخطط السداد والالتزامات المالية
  - **المساعدة التعليمية**: دعم الرسوم المدرسية والمواد التعليمية ومستويات تعليم الأسرة
  - **مساعدة السكن**: تقييم أحوال السكن واحتياجات الأجهزة ودعم الإقامة
- **إدارة الأطفال**: تتبع معلومات الأطفال بما في ذلك المراحل المدرسية والاحتياجات التعليمية والتطوير
- **أفراد الأسرة الإضافيون**: دعم أفراد الأسرة الممتدة غير المسجلين في السجل الرئيسي
- **تكامل Google Drive**: إنشاء مجلدات تلقائية لتخزين المستندات وإدارة الصور
- **نظام الطلبات**: يمكن لدور المستخدم تقديم طلبات لموافقة المدير
- **إدارة الحالة**: تصنيفات القائمة البيضاء والقائمة السوداء وقائمة الانتظار

### 👪 نظام إدارة الأسر
- **تنظيم الأسر**: تجميع الأفراد في وحدات أسرية مع علاقات الوالدين والأطفال
- **تتبع حالة الأسرة**: نظام حالة مرمز بالألوان (أخضر، أصفر، أحمر) للتقييم السريع
- **ملفات أسرية كاملة**: العنوان والهاتف ومعلومات المنطقة وحجم الأسرة
- **دعم متعدد الأجيال**: تتبع الأجداد والوالدين والأطفال والأسرة الممتدة
- **عمليات على مستوى الأسرة**: عمليات مجمعة للأسر بأكملها في التوزيعات

### 📦 نظام إدارة التوزيعات
- **تتبع توزيع المساعدات**: حفظ سجلات كاملة لجميع التوزيعات الخيرية
- **دعم متعدد المستفيدين**: توزيع على الأفراد والأطفال وأفراد الأسرة الإضافيين
- **أنواع مساعدة مرنة**: دعم للطعام والطب والتعليم والطوارئ وفئات المساعدة الأخرى
- **تتبع الكمية والقيمة**: محاسبة دقيقة للعناصر الموزعة والقيم النقدية
- **أدوات اختيار المستفيدين**:
  - اختيار فردي مع البحث والمرشحات
  - اختيار على مستوى الأسرة (جميع الأعضاء مرة واحدة)
  - اختيار مجمع حسب المنطقة
  - تصفية حسب نوع المساعدة (اختيار جميع ذوي الاحتياجات المحددة)
  - أدوات اختيار متقدمة (الأطفال فقط، الأعضاء الإضافيون فقط)
- **عمليات مجمعة**: اختيار الكل، إلغاء اختيار الكل، حذف مستفيدين متعددين
- **تاريخ التوزيعات**: مسار تدقيق كامل لجميع التوزيعات
- **إدارة الحالة**: تتبع تقدم التوزيع من التخطيط إلى الإنجاز

### 📊 لوحة التحكم ونظام التقارير
- **إحصائيات فورية**: أعداد مباشرة للأفراد والأسر والأطفال والتوزيعات
- **تحليلات بصرية**: رسوم بيانية ومخططات تُظهر:
  - اتجاهات التوزيع عبر الزمن
  - تقسيمات أنواع المساعدة
  - إحصائيات حسب المنطقة
  - توزيعات حالة الأسرة
- **تحليل الاحتياجات**: تقارير شاملة عن متطلبات المساعدة
- **الطلبات المعلقة**: واجهة إدارية لمراجعة وموافقة طلبات المستخدمين
- **قدرات التصدير**: إنشاء تقارير للتحليل الخارجي

### 🔐 المصادقة والتحكم في الوصول
- **نظام قائم على الأدوار**:
  - **المستخدمون الإداريون**: وصول كامل للنظام وقدرات الموافقة وعمليات CRUD كاملة
  - **المستخدمون العاديون**: تقديم طلبات لموافقة المدير وعرض البيانات المقيدة
- **مصادقة آمنة**: مصادقة مدعومة بـ Supabase بالبريد الإلكتروني/كلمة المرور
- **إدارة المستخدمين**: أدوات إدارية لإدارة حسابات المستخدمين والصلاحيات

### 🌐 الدعم متعدد اللغات
- **واجهة ثنائية اللغة كاملة**: دعم كامل للغتين العربية والإنجليزية
- **دعم تخطيط RTL/LTR**: تخطيط صحيح من اليمين إلى اليسار للواجهة العربية
- **التوطين الثقافي**: تنسيقات التاريخ والأرقام والاتفاقيات الثقافية
- **تبديل اللغة الديناميكي**: تبديل اللغة في الوقت الفعلي دون إعادة تحميل الصفحة

### 🔍 البحث والتصفية المتقدمة
- **البحث العام**: البحث عبر الأفراد والأسر والأطفال
- **مرشحات متقدمة**:
  - تصفية حسب المنطقة
  - تصفية حسب نوع المساعدة
  - تصفية تاريخ التوزيع
  - تصفية حالة الأسرة
  - تصفية نطاق التاريخ
- **البحث الذكي**: البحث بالاسم أو رقم الهوية أو الهاتف أو أي معلومات تعريفية

## 🛠️ البنية التقنية

### مجموعة تقنيات الواجهة الأمامية
- **React 18**: React حديث مع الخطافات والميزات المتزامنة
- **TypeScript**: أمان نوع كامل وتجربة تطوير محسنة
- **Tailwind CSS**: تصميم قائم على الأدوات مع تصميم متجاوب
- **React Hook Form**: معالجة نماذج متقدمة مع التحقق
- **Zod Schema Validation**: فحص النوع في وقت التشغيل والتحقق من النماذج
- **Lucide React**: نظام أيقونات حديث
- **React Router**: توجيه من جانب العميل مع إدارة الحالة

### الخلفية وقاعدة البيانات
- **Supabase**: قاعدة بيانات PostgreSQL مع قدرات الوقت الفعلي
- **أمان مستوى الصف (RLS)**: سياسات أمان على مستوى قاعدة البيانات
- **اشتراكات الوقت الفعلي**: تحديثات البيانات المباشرة عبر التطبيق
- **وظائف SQL متقدمة**: وظائف قاعدة بيانات مخصصة للعمليات المعقدة

### التكاملات
- **Google Drive API**: إنشاء وإدارة مجلدات المستندات تلقائياً
- **Google Cloud Storage**: تخزين ومشاركة ملفات آمنة

## 🚀 البدء

### المتطلبات الأساسية
- Node.js 18+ و npm
- حساب ومشروع Supabase
- بيانات اعتماد Google Drive API (اختياري ولكن موصى به)

### خطوات التثبيت

1. **استنساخ المستودع**:
   ```bash
   git clone <repository-url>
   cd khairDB
   ```

2. **تثبيت التبعيات**:
   ```bash
   npm install
   ```

3. **تكوين البيئة**:
   أنشئ ملف `.env.local` مع:
   ```
   VITE_SUPABASE_URL=your_supabase_url
   VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
   VITE_GOOGLE_DRIVE_API_KEY=your_google_drive_api_key
   ```

4. **إعداد قاعدة البيانات**:
   ```bash
   npm run setup-db
   ```

5. **بدء خادم التطوير**:
   ```bash
   npm run dev
   ```

### إعداد تكامل Google Drive

لقدرات إدارة المستندات:

1. الوصول إلى [Google Cloud Console](https://console.cloud.google.com/)
2. إنشاء أو اختيار مشروع
3. تمكين Google Drive API
4. إنشاء بيانات اعتماد API
5. إضافة بيانات الاعتماد إلى متغيرات البيئة

ينشئ النظام هياكل مجلدات منظمة:
```
قاعدة بيانات الخير/
├── مستندات الأفراد/
│   ├── [اسم الفرد]/
│   │   ├── المستندات/
│   │   ├── الصور/
│   │   └── السجلات الطبية/
```

## 📱 دليل المستخدم

### للمستخدمين الإداريين
1. **نظرة عامة على لوحة التحكم**: الوصول إلى الإحصائيات الفورية والطلبات المعلقة
2. **إدارة الأفراد**: إنشاء وتحرير وإدارة ملفات المستفيدين
3. **تنظيم الأسر**: تجميع الأفراد في أسر وإدارة العلاقات
4. **تخطيط التوزيعات**: إنشاء وإدارة توزيعات المساعدات
5. **إدارة المستخدمين**: موافقة الطلبات وإدارة صلاحيات المستخدمين
6. **التقارير والتحليلات**: إنشاء رؤى وتصدير البيانات

### للمستخدمين العاديين
1. **تقديم الطلبات**: إنشاء طلبات لأفراد جدد أو مساعدة
2. **عرض البيانات**: الوصول إلى الأفراد والأسر المخصصة
3. **البحث والتصفية**: العثور على المستفيدين باستخدام أدوات البحث المتقدمة
4. **دعم اللغة**: التبديل بين الواجهات العربية والإنجليزية

## 🔧 التطوير

### هيكل المشروع
```
src/
├── pages/           # صفحات التطبيق الرئيسية
├── components/      # مكونات واجهة المستخدم القابلة لإعادة الاستخدام
├── services/        # API ومنطق الأعمال
├── hooks/          # خطافات React مخصصة
├── types/          # تعريفات TypeScript
├── lib/            # مكتبات الأدوات
├── contexts/       # سياقات React
├── translations/   # ملفات اللغة
└── styles/         # الأنماط العامة

supabase/
├── migrations/     # هجرة قاعدة البيانات
├── functions/      # وظائف قاعدة البيانات
└── schemas/        # مخططات قاعدة البيانات
```

### السكريبتات المتاحة
- `npm run dev` - خادم التطوير مع إعادة التحميل الساخن
- `npm run build` - بناء الإنتاج
- `npm run test` - تشغيل مجموعة الاختبار
- `npm run lint` - فحوصات جودة الكود
- `npm run type-check` - التحقق من TypeScript

### إرشادات المساهمة
1. فرع المستودع
2. إنشاء فرع ميزة
3. اتبع اتفاقيات TypeScript و ESLint
4. إضافة اختبارات للميزات الجديدة
5. تقديم طلب سحب

## 📄 الترخيص

هذا المشروع مرخص تحت رخصة MIT - راجع ملف LICENSE للتفاصيل.

## 🆘 الدعم

للدعم التقني أو الأسئلة:
- إنشاء مشكلة في المستودع
- الاتصال بفريق التطوير
- فحص ويكي التوثيق

---

**قاعدة بيانات الخير** - تمكين المؤسسات الخيرية بالتكنولوجيا الحديثة لخدمة المحتاجين بفعالية أكبر.
